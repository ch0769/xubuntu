(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{451:function(s,a,n){"use strict";n.r(a);var t=n(14),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("斐讯N1 docker安装homeassistant  配置斐讯dc1智能插座")]),s._v(" "),n("p",[s._v("默认代码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('docker run -d --restart=always --name="home-assistant" -e TZ=Asia/Shanghai -v /var/lib/docker/homeassistant:/config -p 8123:8123 -v /etc/localtime:/etc/localtime:ro --net=host homeassistant/aarch64-homeassistant:latest\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),s._v(" "),n("p",[s._v("homeassistant:latest表示最新版的 用0.88.1顺手了，配置文件也有了，就不想安装最新版本的了。新版也试用过，不太好用"),n("br"),s._v("\n刚开始用的代码是")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('docker run -d --restart=always --name="home-assistant" -e TZ=Asia/Shanghai -v /var/lib/docker/homeassistant:/config -p 8123:8123 -v /etc/localtime:/etc/localtime:ro --net=host homeassistant/aarch64-homeassistant:0.88.1\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("没几天发现N1omv不能登陆，查询到内存储存已满，查找到var/lib/docker/homeassistant/config 里面有一个home-assistant_v2.db文件占了2G多，而且会不断的变大，更改 /docker/homeassistant的安装目录到移动硬盘"),n("br"),s._v("\n这个是我的docker的安装目录，/sharedfolders/2t/docker"),n("br"),s._v("\n所以修改后的代码就是把/var/lib/docker更换成/sharedfolders/2t/docker")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('docker run -d --restart=always --name="home-assistant" -e TZ=Asia/Shanghai -v /sharedfolders/2t/docker/homeassistant:/config -p 8123:8123 -v /etc/localtime:/etc/localtime:ro --net=host homeassistant/aarch64-homeassistant:0.88.1\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("下载DCI配网工具\n给DC1配置好网络，要在路由里面找到DC1的ip就算完成了")]),s._v(" "),n("p",[s._v("下载 20190628 HA Docker - DC1 M1.rar 里面有配置说明的"),n("br"),s._v("\n蓝奏云网盘下载 https://www.lanzous.com/b987569"),n("br"),s._v("\n下载的文件里面有配置说明的，我也简单说下，把custom_components、M1（悟空净化器）、packages上传到/homeassistant根目录，下面内容复制进configuration.yaml底部"),n("br"),s._v("\nhomeassistant:"),n("br"),s._v("\npackages: !include_dir_named packages"),n("br"),s._v("\n斐讯K2老毛子固件路由。高级设置，内部网络，DHCP服务器，自定义配置文件 “hosts”"),n("br"),s._v("\n增加以下两句"),n("br"),s._v("\n192.168.123.24 Smartplugconnect.phicomm.com"),n("br"),s._v("\n192.168.123.24 aircat.phicomm.com"),n("br"),s._v("\n备注：192.168.123.24是我的斐讯N1的ip"),n("br"),s._v("\n修改packages/phicomm_dc1m.yaml"),n("br"),s._v("\nip修改成你在路由器里面看到DC1的ip")]),s._v(" "),n("p",[s._v("配置根目录的automations.yaml"),n("br"),s._v("\n我设置了饮水机06.30开 00.30关 打印机18.00开 00.00关，下面是代码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("- alias: switch_on 06.30\n  initial_state: true\n  trigger:\n  - platform: time\n    at: '06:30:00'\n  action:\n  - service: switch.turn_on \n    entity_id: switch.dc1_s1_template\n- alias: switch_off 00.30\n  initial_state: true\n  trigger:\n  - platform: time\n    at: '00:30:00'\n  action:\n  - service: switch.turn_off\n    entity_id: switch.dc1_s1_template\n\n\n- alias: switch_on 18.00\n  initial_state: true\n  trigger:\n  - platform: time\n    at: '18:00:00'\n  action:\n  - service: switch.turn_on\n    entity_id: switch.dc1_3_s3_template\n- alias: switch_off 00.00\n  initial_state: true\n  trigger:\n  - platform: time\n    at: '00:00:00'\n  action:\n  - service: switch.turn_off\n    entity_id: switch.dc1_3_s3_template\n\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br")])]),n("p",[s._v("配置过程发现问题解决的的3个方法"),n("br"),s._v("\n1、斐讯DCI拔插头断电，再接电"),n("br"),s._v("\n2、重启homeassistant"),n("br"),s._v("\n3、退出homeassistant账户，重新登陆")]),s._v(" "),n("p",[s._v("可以在docker重启homeassistant ，也可以在网页重启，配置好文件后可以按下图更改，0.88.1配置是这样的，新版貌似没有配置检查。"),n("br"),s._v(" "),n("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pLmxvbGkubmV0LzIwMTkvMDkvMTYvNzFxSWZnT2N0WFFFckI1LnBuZw?x-oss-process=image/format,png",alt:"dc1配置.png"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);